---
layout: post
title: 计算机网络笔记第十一周
tags: [Learning]
---
## 第十一周

### 复习题
1. ping请求发到中间路由器，该路由器查表发现无法到达目的主机，会返回？
	- 主机不可达
2. ping到达目的主机，返回时返回不了，原主机显示的信息？
	- 请求超时
3. DHCP服务器的功能？
	- 主机在加入网络时动态租用IP地址
4. 路由表的匹配方法
	- 目的IP地址 && 子网掩码 = 子网号？
	- 最长匹配原则：当有多条路由都匹配时选择子网掩码最长的路由
5. 路由器和交换机的区别？
	- 交换机：透明，不对帧进行处理，不查路由表，直接对帧进行转发
	- 路由器：路由器两个以太网接口处于两个不同的局域网，数据帧没有标识符，IP分组有
	- 每经过一个路由器：IP src不同，TTL不同，IP分组拆分不同

#### 路由协议

默认路由和直连路由都是静态路由

#### 自治系统
- 自制系统（AS）
- 内部网关协议（IGP）-\> RIP、OSPF
- 外部网关协议（EGP）-\> EGP、BGP
- AS中可以使用多个IGP协议，使用同一个IGP协议的连通区称为一个路由选择域
- 中转AS需要IANA分配AS号，末端AS不需要。

#### 路由算法：找最短路径的算法
- link state（链路状态）
- distance vector（距离向量）

### RIP协议

#### 距离向量算法
- 每个结点周期性发送它自己的距离向量估计（路由表）（distance vector estimate）给邻居
- 当一个节点收到来自邻居的新的距离向量估计（路由表）时，它将根据B-Fd等式更新它自己的距离向量
- 根据邻居的路由表，建立自己的路由表
- 初始时每个路由器只有直连网的路由器

#### 路由信息协议（RIP）：采用距离向量算法的路由协议
- 以跳为单位，最大距离15，16位无穷大
- 初始时每个RIP路由器只有到直连网的路由，距离为1
- 每30秒RIP路由器把它的整个路由表发送给邻居

##### 详细流程
- 收到的路由的距离全部加一
- 利用上述路由修改路由表
	- 把路由表不存在的路由加入路由表
	- 如果比路由表中的路由的距离更小，则更新该路由的距离为新距离，把下一跳改为邻居
	- 如果路由存在，就要重置失效定时器
