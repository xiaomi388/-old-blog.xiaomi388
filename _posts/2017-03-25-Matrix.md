---
layout: post
title: Matrix 面试笔记
tags: [Code]
---


### 后台面试分析

#### Linux基本操作
1. 管道(命名管道、匿名管道)、文件描述符(0,1,2代表什么)，流重定向
	- 命名管道：被称为 FIFO 文件，它是一种特殊类型的文件，它在文件系统中以文件名的形式存在。
	- 匿名管道：没有被命名的管道，作用相对命名管道没那么强大，只能应用于父子关系的进程。
	- 管道符"|"：作用是将一个进程的结果传递给下一个进程，比如 

			ls | wc -l

- 管道是 linux 中一个重要的概念，其本质是一个文件，用于进程间通讯。
	- 文件描述符(FD)是一个非负整数，是一个用于表述指向文件的引用的抽象化概念。其中在 Linux 中，0 代表 stdin， 1 代表 stdout，2 代表 stderr。
	- 流重定向：在计算机领域，重定向是大多数命令行解释器所具有的功能，包括各种可以将标准流重定向用户规定地点的 Unix shells。比如

			ls \> lsout.txt

当然你也可以把 C 语言的程序重定向到文件中，也可以把文件中的内容重定向到 stdin。以下命令含义是？

	./a.out 2\>&1 \> /dev/null

2. 查询当前服务器监听的所有端口。查询当前服务器 mysql 占用的所有 TCP 端口以及 TCP 状态。

		sudo netstat -antp | grep "mysql"

3. 查询当前服务器占用 CPU 最高的进程？然后发现 mysql 的 CPU 占用率达到 500%，但是为什么服务器没有卡顿？

		top

在多核服务器中，CPU 占用率最大不是 100%，比如 8 核心 CPU 最大占用率为 800%，还可以通过以下命令查看 CPU 信息。

	cat /proc/cpuinfo

4. 查询当前服务器内存使用情况

		cat /proc/meminfo

5. 查看当前目录占用的磁盘空间是多少，找出 10 个最大的文件（文件夹）

		du -hsx * | sort -rh | head -10

6.  某个机器 ssh 登陆 特别慢，请尝试找出原因
	- 网络带宽资源不足
	- DNS反向解析问题
	- user auth 缓慢，重启后可恢复
	- ......

7. 访问某网站时浏览器提示“正在等待可用套接字”，你觉得是什么原因导致？
	- ...
	- 服务器 socket 分配的端口过多，资源没有回收，此时应该通过网络状态查询服务器链接状态
	- 服务器遭到 DDOS 攻击 

#### Nginx
1. 什么是 CGI (Common Gateway Interface)

	通用网关接口是 web server 和可执行程序之间交流的协议，目的是让可执行程序返回动态数据给 web server 作出响应

2. 什么是反向代理？什么是正向代理？
	- 正向代理是指用户在防火墙内无法访问墙外的网站，这时候可以翻墙的正向代理服务器可以帮助用户去墙外取数据回来。
	- 反向代理是指用户去访问某个地址baidu.com，然而baidu不是真正的服务器，它的后台是一个集群，那么代理服务器就去后端取数据返回给客户。
	- 最大的区别就是反向代理对用户是透明的，用户意识不到自己访问的是一个代理。
3. 如何将指向同一个 ip 的不同域名的请求分发到内网集群的不同机器的不同服务上？

	使用 nginx 的反向代理功能，用 servername 作匹配，还可以实现负载均衡。

4. 如何通过路由匹配而不是域名将请求分发到内网集群的不同机器的不同服务上？

	同3，不过是要在 location 下作配置

#### Python

1. py 中整数的最大长度是多少？

	理论上可以达到内存的大小，并没有限制32位

2. 在 python 交互运行中输入 import this 会有什么效果？

3. 列表和元组、字典、集合、字符串、内置函数(map, reduce, filter, sort, all, any)
4. 函数、参数传递方式有几种？ Key-Only 的传递方式是什么？
5. Python 执行系统操作方式有哪几种？
	- os.system
	- pipes
	- subprocess
6. Python的线程是真正的线程吗？如果不是，是什么原因，有什么优化方法？
	- 不是。
	- 因为在 Python 中存在 GIL（全局解释锁），所以线程会争夺这个锁的资源，所以 Python 多线程是伪多线程。
	- 优化方法就是使用多进程，multiprocessing
7. 迭代协议是什么？生成器函数又是什么？
	- 如果一个对象实现了迭代器协议，则可以用 for 语句遍历这个对象的内容。其中 \_\_iter\_\_ 函数返回一个迭代器对象，而 next 函数则需要返回容器的下一个内容。如果没有下一个则抛出 StopIteration 异常，这个异常在 for... in... 语句中将会被捕获然后结束迭代。迭代器协议详细内容可以查看 *PEP234*。
	- 生成器函数：一个 def 编写的普通函数，但是每次 yield 返回一个结果，并且在每个结果之间挂起和保存其中状态。
8. 异步架构，ioloop，coroutine。yield 关键字和 yield from 关键字，await 关键字，async 关键字，考察 Python 高级应用。异步框架有 gevent，3.x的 asyncio。Python 实现异步时候必须实例化一个 loop 以提供支持。 croutine 是携程，在 python 中一般使用这个来实现异步。
	 - yield 关键字是一个语法糖，他的内部实现了迭代协议。
	- yield from 是 3.x 的新特性，他可以从左到右迭代 yield 的所有内容
	- await 和 async 是 3.x 的新特性，目的是不需要在函数前加入 @decorator
9. 鸭子类型，多态