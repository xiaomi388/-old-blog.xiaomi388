---
layout: post
title: 计算机网络笔记第六周
tags: [Learning]
---
### 第六周

#### 复习题
1. 对一个网桥，在若干主机发送帧后，求网桥增加的MAC地址表。

	> 网桥通过原地址进行学习，查表是用目的地址，若查不到，则扩散(flood)，若扩散时遇到其他网桥，则其他网桥也会进行学习

> 三个概念：扩散(flood) 转发(forward) 过滤(filter)

2. MAC 的含义？

	> 介质访问控制子层

3. 两台主机，一个两次冲突，一个三次冲突，求下一次冲突的概率

	> 4/(4x8) = 1/8

4. MAC层协议相同
5. 为什么要用生成树算法（生成树协议）？

	> 出现回路，可能会产生*广播风暴*，所以要形成树防止产生回路

#### 生成树协议 IEEE 802.1D Spanning Tree Protocol
- BID（最小）确定根网桥，除根节点外每个节点选一条最短路径，该路径所连端口成为根端口，从而构成一颗树。
- 若有多条最短路径，则取下一个网桥ID和端口ID较小的。
- 指定端口：指定网桥上与网段连接的端口
- 指定网桥：网段上离根最近的网桥
- 网桥只在根端口和指定端口之间转发帧

##### 实验拓展：快速生成树协议 RSTP

#### 虚拟局域网
- VLAN ID，端口默认 VLAN 为 VLAN1
- 家用交换机(路由器)并没有这个功能
- 干道(Trunk)端口：对网桥，*只有发往干道端口的帧才需要加上 VLAN ID*，从干道收到的帧如果没有 ID ，则认为是*本征 VLAN*(Native VLAN) ，默认为 VLAN 1
- 发往干道的 Native VLAN 的帧不加 VLAN ID
- 问：以太网帧可以识别 IEEE 802.1Q的帧吗？
	- 不行？

##### IEEE 802.1Q 的帧
- 4B协议，3b优先权PRI，1b标准格式指示位CFI，12b VLAN ID
- 问：以太网帧可以识别 IEEE 802.1Q的帧吗？
	- 不行？

##### CST PVST+ MSTP
- CST：IEEE 802.1Q定义了所有VLAN共享一棵树的公共生成树
- PVST：为每个 VLAN 配置一个生成树
- MSTP：每个 VLAN 组使用一颗生成树

##### 实验拓展：设置 VLAN ID

> 期中考试范围：第四单元前

#### 交换机

##### 作用
把多个网段连接起来，也称为多端口网桥

##### 工作原理
透明网桥算法

##### 特性
全双工模式：收发分离，没有冲突，可关闭CSMA/CD算法
自动翻转：可以自动选择连接方式：交叉线或直通线

##### 交换结构
- 共享总线交换机
	- 端口具有输入缓冲区和输出缓冲区
- 纵横式
	- 可以实现多路并行传输，端口有多个输入开关，对于有多个输入，可以同时输出。

##### 转发方法
- 存储转发(Store and forward) 收完整个帧再转发-\> 大部分都采用的转发模式
- 直通(Cut through) 收到硬件地址后立刻转发
- 无碎片(Fragment free) 收到前64个字节(冲突窗口)后立刻转发
- 适应性交换(Adaptive switching) 自动选择上述三种方法

##### 
- 全双工模式
- 自动翻转

##### 自适应
- 两个站点周期性使用快速链路脉冲（fast link pulse，FTP）选择 10M/100M/1000M bps 自适应。
- 尽可能全双工，尽可能速度快

##### 令牌环网 Token Ring IEEE 802.5 已经很少人用了
- 令牌帧：由掌握令牌的电脑先发送数据。
- 接受数据的电脑则检查帧表头，若是给自己的则接受
- 无论是否自己的都会再传下去
- Take Turns Protocol
- 作用：避免冲突
- 缺点：令牌帧产生，丢失如何处理？


