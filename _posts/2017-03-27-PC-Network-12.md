---
layout: post
title: 计算机网络笔记第十二周
tags: [Learning]
---
## 第十二周

### 复习题
1. *路由器接受到 ip 分组后如何处理？*
	- 取出 ip 的目的地址，得到下一跳
	- 拿 arp 协议得到下一跳的 mac 地址，如果没有下一跳，则已经到达，用目的地址（ip地址）通过ARP协议获得目的地址MAC协议。
	- 重新封装成帧。
	- （当帧是点到点网的时候不用arp协议）
	- （路由器收到和重新封装的帧不一样（TTL、校验和））

### 虚接口
- 二层交换机：只需考虑物理层和数据链路层
- 三层交换机需要查路由表，可以根据 vlan 设置接口 ip。

### RIP协议的问题
#### 慢收敛：当增加一个新网络 N1的时候，N1的路由要从R1传到 Rm 最多需要多长时间?最短?平均? 
-  最长 30(m-1) s
- 最短 接近 0
- 平均 15(m-1) s
- m最大15

#### 计数到无穷（需要慢慢计数而不能一步到位）：当N1失效时
\<N,R,x\>  N：目的网络 R：下一跳 x：时间
初始：\<N1,-,16\> \<N1,R1,2\>
R2先给R1发路由表：
R1根据R2路由表改成\<N1,R2,3\>
R2\<N1,R1,4\>
R1\<N1,R2,5\>
双方都加到16才停

#### 解决计数到无穷的方法
##### 技术1：水平分割
- 从一个接口学来的路由不会从该接口发回去。
- 问题：三台路由器构成环路时失效。

##### 技术2：毒性反转
##### 技术3：抑制技术：距离被改为无穷大的路由在一段短时间（180）内其距离不允许被修改
##### 技术4：触发更新
- 一旦出现路由变化将立刻把增加或更新的路由发给邻居，原有的30秒发一次完整的路由表依然不变。

#### RIP协议的定时器
- 更新定时器，30秒
- 一条路由的失效定时器，180秒
- 一条路由的清除定时器 240秒
- 抑制定时器 180秒

#### RIP的数据包格式
- v1
- v2
	- v2在安全性方面的改进：例子：带路由器到实验室连接，声称他跟所有网都直连，使所有流量都从该路由器通过。
