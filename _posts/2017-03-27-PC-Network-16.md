---
layout: post
title: 计算机网络笔记第十六周
tags: [Learning]
---
# 第十六周
- EIGRP协议：也是内部网关协议（思科专用）
- IGP：RIP、OSPF、EIGRP
- EGP：BGP
### 复习题
1. 逆向路径广播如何防止回路？
	- 当一个路由器收到一个源地址为S发往组G的多 播分组\<S,G\>时, 当且仅当该分组到来的接口在从该路由器到S的最短 路径(Parent Link)上时,该路由器才在它的其它接口广播(flooding) 该分组。
2. 如何证明？
	-   
3. 为什么要删除默认网关？
	- PC如果有默认网关，则有一个默认路由。如果配置两个默认网关，则PC有两个默认路由，此时PC会选择第一个默认路由。
		> 0.0.0.0 0.0.0.0 172.16.0.254
		> 0.0.0.0 0.0.0.0 192.168.1.1  

4. DVMRP 和 PIM-DM
	- 距离向量多播路由协议（DVMRP）是在RIP的基础上使用逆向路径多播算法实现的多播路由算法。逆向路径多播算法一般用于组成员较多的情况下
	- 协议无关多播-稠密模式协议（PIM-DM）采用逆向路径多播算法实现
	- （MOSPF是另一种用于组成员稠密方式下的多播协议）
	- （协议无关多播-稀疏模式协议用实现于组成员稀疏情形下的多播）

5. IGMP协议的作用
	- 用于路由器查询与它直连的网络上是否存在组成员


## 传输层
- 传输层协议称为*端到端或进程到进程的协议*。
- 什么是流控制？什么是拥塞控制

### TCP/UDP报文
- UDP：不可靠尽力服务
- TCP：可靠字节流服务

### 传输层的多路复用和解多路复用

### 端口号
- 知名端口：知名网络服务的系统进程所用
- 注册端口：企业软件所用
- 动态端口：用户可以随便使用

### UDP协议
- 发送给接受进程的数据有可能丢失，也有可能错序
- 接受进程每次接受一个数据报，如果进程设置的接受缓冲区不够大，*收到的数据报将被截断*。
- 类似寄信

#### UDP（用户数据包协议）报文格式
- 校验和的作用？

### TCP（传输控制）协议
- 可靠数据传送服务
- 全双工，流控制机制，提供拥塞控制
- 类似打电话
- 字节流服务：表示没有消息边界；
	- 例如：多次发送的数据可以放在一个数据段中传送且不标识边界
- 每个数据段的数据部分的最大长度不能超过MSS（Maxmum Segment Size）
- 每个TCP连接可以由四元组唯一标识：源IP地址，源端口号，目的IP地址，目的端口号。

#### TCP报文格式
1.  标志位
	- URG：包含紧急数据
	- ACK：确认号有效
	- PSH：告知接收方发送方执行了推送（Push）操作，接收方需要尽快将所有缓存的数据交给接受进程
	- RST：重置连接
	- SYN：同步序号表示，用来发起一个TCP连接
	- FIN：结束标志，不再发送数据
2. 数据段的序号：第一个字节的编号
3. 校验和由伪IP头、TCP头和TCP数据部分形成，其形成方法与UDP协议类似
4. 紧急指针用于带外数据（out-of-band）的边界，标志URG为1时有效
5. 建立连接时的选项：
	- MSS （Maxmum Segment Size）
	- 窗口比例
	- 是否使用选择性确认

#### 三次握手开启
注意seq中 x、y 的值
server accpet ACK = x+1
client ACK = y+1

#### 四次握手关闭
- 合并中间两次握手（ACK和FIN一起发）
- 双方同时发出FIN
- 先发送 FIN 报文的一方在 ACK 发送完毕后需要等待 2MSL 的时间才完全关闭连接。
- FIN报文采用超时自动重发方式。若多次后仍无确认，则发送RST强行关闭

#### TCP状态转换图